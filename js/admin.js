"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var modePc,modePhone,windowWidth=$(window).width(),breakpoint={};breakpoint.getValue=function(){this.value=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\"/g,""),modePhone=-1!==["xs","sm"].indexOf(this.value),modePc=!modePhone},$(function(){breakpoint.getValue()}),$(window).on("load",function(){}),$(window).resize(function(){$(window).width()!==windowWidth&&location.reload()}),$(window).scroll(function(){}),$(window).on("load",function(){function r(){_classCallCheck(this,r),this.type="",this.name="",this.required=!1,this.question="",this.answerList=[],this.answerOther={name:"",required:!1}}new Vue({el:"#questionnaire",data:{message:"",heading:"",description:"",questionList:[]},methods:{submit:function(){var t=this,e=$("#questionnaire form"),i=e.attr("action"),n=e.attr("data-sheet-id");$.ajax({method:"POST",url:i,data:e.serialize()}).done(function(e){}).fail(function(e){}).always(function(e){if($("#questionnaire-modal").modal("show"),-1!==[0,200].indexOf(e.readyState)){t.message="感謝您的參與 ^ ^";var i=[];$.get("//spreadsheets.google.com/feeds/list/"+n+"/1/public/values?alt=json",function(e){e.feed.entry.forEach(function(t){var n={};Object.keys(t).filter(function(e){return-1!==e.indexOf("gsx$")}).forEach(function(e){var i=e.replace("gsx$","");n[i]=t[e].$t}),i.push(n)}),console.log(i.length),console.log(JSON.stringify(i))}),$("#questionnaire-modal").on("hidden.bs.modal",function(){alert(JSON.stringify(i))})}else t.message="連線異常！請再試一次"})},isAnswerOtherRequired:function(e){e.answerOther.required=!e.answerOther.required}},mounted:function(){var i=this;i.heading=$("#spider .freebirdFormviewerViewHeaderTitle").text().trim(),i.description=$("#spider .freebirdFormviewerViewHeaderDescription").text().trim(),$("#spider .freebirdFormviewerViewNumberedItemContainer").each(function(){var t=$(this),n=new r;if([{class:".freebirdFormviewerViewItemsRadioOptionContainer",type:"radio"},{class:".freebirdFormviewerViewItemsCheckboxOptionContainer",type:"checkbox"},{class:".freebirdFormviewerViewItemsTextShortText",type:"text"}].find(function(e){var i=!!t.find(e.class).length;return i&&(n.type=e.type),i}),n.type){switch(n.type){case"radio":case"checkbox":n.name=t.find("input[type=hidden]:disabled").attr("name");break;case"text":n.name=t.find("input").attr("name")}var e=!!t.find(".freebirdFormviewerViewItemsItemRequiredAsterisk").length;if("checkbox"!==n.type&&e&&(n.required=!0),n.question=t.find(".freebirdFormviewerViewItemsItemItemTitle").text().trim(),"text"===n.type){["電話","手機"].some(function(e){return-1!==n.question.indexOf(e)})&&(n.type="tel");["Email","email","郵件","信箱"].some(function(e){return-1!==n.question.indexOf(e)})&&(n.type="email")}-1!==["radio","checkbox"].indexOf(n.type)&&(t.find(".exportLabel").each(function(){n.answerList.push($(this).text().trim())}),[".freebirdFormviewerViewItemsRadioOtherChoice",".freebirdFormviewerViewItemsCheckboxOtherChoice"].forEach(function(e){t.find(e).length&&(n.answerOther.name=n.name+".other_option_response")})),i.questionList.push(n)}})}})});